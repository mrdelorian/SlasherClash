<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Slasher Clash</title>
<style>
body { font-family:'Arial', sans-serif; background:#121212; color:#fff; margin:0; padding:0; display:flex; flex-direction:column; align-items:center; min-height:100vh; text-align:center;}
h1 { font-size:4rem; color:#f44336; margin:20px 0; text-shadow:2px 2px 5px rgba(0,0,0,0.6);}
.controls {margin:10px 0;}
.controls button {margin:5px; padding:8px 16px; font-size:1rem; border:none; border-radius:5px; cursor:pointer; background-color:#f44336; color:white;}
.controls button:hover {background-color:#d32f2f;}
#round {margin:10px 0; font-size:1.3rem; display:none; color:#f44336;}
#timer {font-size:1.5rem; margin:15px 0;}
.battle-container {display:flex; justify-content:center; gap:20px; margin-top:20px; width:90%; max-width:900px; flex-wrap:wrap;}
.villain-container {background:#333; border-radius:10px; padding:10px; flex:1 1 250px; text-align:center; box-shadow:0 4px 8px rgba(0,0,0,0.3); cursor:pointer; transition: transform 0.3s, opacity 0.3s;}
.villain-container img {width:100%; max-width:250px; border-radius:10px; transition: transform 0.3s;}
.villain-container:hover {transform:scale(1.05);}
.villain-container.eliminated {opacity:0.3; pointer-events:none;}
.villain-container p {font-size:1.2rem; margin-top:10px; font-weight:bold;}
#leaderboard {background:rgba(0,0,0,0.8); padding:20px; border-radius:10px; width:90%; max-width:600px; box-shadow:0 4px 8px rgba(0,0,0,0.5); margin:20px 0;}
#leaderboard h2 {color:#f44336; margin-bottom:10px;}
ul {list-style:none; padding:0;}
ul li {margin:5px 0; font-size:1rem;}
#bracket-container {display:flex; flex-wrap:nowrap; justify-content:center; align-items:flex-start; margin:20px 0; overflow-x:auto;}
.round {display:flex; flex-direction:column; align-items:center; margin:0 15px;}
.round h3 {color:#f44336; margin-bottom:10px;}
.match {margin-bottom:15px; padding:5px; background:#222; border-radius:5px; min-width:120px;}
.match span.eliminated {text-decoration:line-through; color:#888;}
.match span.winner {background-color:darkred; color:white; padding:2px 4px; border-radius:3px;}
#winner {display:none; margin-top:20px;}
#winner img {max-width:200px; border-radius:10px;}
footer {margin-top:auto; padding:10px; font-size:0.9rem; color:#aaa;}
footer a {color:#f44336; text-decoration:none;}
@media(max-width:768px){h1{font-size:2.5rem;} .battle-container{flex-direction:column; align-items:center;} @media(orientation:landscape){.battle-container{flex-direction:row; flex-wrap:nowrap;}}}
</style>
</head>
<body>
<h1>Slasher Clash</h1>
<div class="controls">
<button onclick="setMode('normal')">Normal Mode</button>
<button onclick="setMode('tournament')">Tournament Mode</button>
</div>
<div id="round">Round: 1</div>
<div id="timer">Time Remaining: 01:00</div>
<div class="battle-container" id="battle-container"></div>
<div id="bracket-container"></div>
<div id="leaderboard">
<h2>Leaderboard</h2>
<ul id="leaderboard-list"></ul>
</div>
<div id="winner">
<h2>Winner</h2>
<img id="winner-image" src="" alt="">
<p id="winner-name"></p>
<p id="winner-score"></p>
</div>
<footer><p>Created by <a href="#">mr delorian</a></p></footer>

<script>
const villains=[
{name:"Freddy Krueger", image:"images/freddy.jpg", wins:0},
{name:"Jason Voorhees", image:"images/jason.jpg", wins:0},
{name:"Chucky", image:"images/chucky.jpg", wins:0},
{name:"Michael Myers", image:"images/michaelmyers.jpg", wins:0},
{name:"Pinhead", image:"images/pinhead.jpg", wins:0},
{name:"Esther", image:"images/esther.jpg", wins:0},
{name:"Art The Clown", image:"images/arttheclown.jpg", wins:0},
{name:"Candyman", image:"images/candyman.jpg", wins:0},
{name:"The Thing", image:"images/thething.jpg", wins:0},
{name:"Frankenstein", image:"images/frankenstein.jpg", wins:0}
];

let mode="normal", timer=null, timeLeft=60, currentMatch=[], inputLocked=false;
let tournamentQueue=[], tournamentBracket=[], tournamentWinners=[], roundNumber=1;

// ---------------- Mode -----------------
function setMode(selectedMode){
  mode=selectedMode; clearInterval(timer); inputLocked=false;
  currentMatch=[]; tournamentQueue=[]; tournamentBracket=[]; tournamentWinners=[];
  roundNumber=1;
  document.getElementById("winner").style.display="none";
  document.getElementById("battle-container").innerHTML="";
  document.getElementById("bracket-container").innerHTML="";
  document.getElementById("round").style.display=(mode==='tournament')?'block':'none';
  document.getElementById("leaderboard").style.display=(mode==='normal')?'block':'none';
  if(mode==='normal'){
    villains.forEach(v=>v.wins=0);
    updateLeaderboard();
  }
  timeLeft=(mode==='normal')?60:12;
  document.getElementById("timer").textContent=(mode==='normal')?"Time Remaining: 01:00":"Time Remaining: 00:12";
  startTimer();
  if(mode==='normal') nextNormalMatch();
  if(mode==='tournament') startTournament();
}

// ---------------- Timer -----------------
function startTimer(){
  clearInterval(timer);
  timer=setInterval(()=>{
    if(timeLeft>=0){
      let m=String(Math.floor(timeLeft/60)).padStart(2,'0'); 
      let s=String(timeLeft%60).padStart(2,'0'); 
      document.getElementById("timer").textContent=`Time Remaining: ${m}:${s}`; 
      timeLeft--;
    }else{
      clearInterval(timer);
      if(mode==='normal') showNormalWinner();
      else if(mode==='tournament') advanceTournament();
    }
  },1000);
}

// ---------------- Normal Mode -----------------
function nextNormalMatch(){
  inputLocked=false;
  let v1=villains[Math.floor(Math.random()*villains.length)];
  let v2=villains[Math.floor(Math.random()*villains.length)];
  while(v2===v1) v2=villains[Math.floor(Math.random()*villains.length)];
  displayMatchup(v1,v2);
}

function selectWinner(name){
  if(inputLocked) return;
  inputLocked=true;
  if(mode==='normal'){
    if(timeLeft<0) return;
    let winner=villains.find(v=>v.name===name);
    winner.wins++;
    updateLeaderboard();
    setTimeout(()=>{ inputLocked=false; nextNormalMatch(); },200);
  } else if(mode==='tournament'){
    let winner=currentMatch.find(v=>v.name===name);
    let loser=currentMatch.find(v=>v.name!==name);
    markBracket(winner.name, loser ? loser.name : null, roundNumber-1);
    tournamentWinners.push(winner);
    timeLeft=12;
    setTimeout(()=>advanceTournament(),200);
  }
}

function updateLeaderboard(){
  const list=document.getElementById("leaderboard-list");
  list.innerHTML="";
  villains.sort((a,b)=>b.wins-a.wins).forEach(v=>{
    const li=document.createElement("li");
    li.textContent=`${v.name}: ${v.wins} wins`;
    list.appendChild(li);
  });
}

function showNormalWinner(){
  inputLocked=true; clearInterval(timer);
  let winner=[...villains].sort((a,b)=>b.wins-a.wins)[0];
  document.getElementById("winner-image").src=winner.image;
  document.getElementById("winner-name").textContent=winner.name;
  document.getElementById("winner-score").textContent=`${winner.wins} wins`;
  document.getElementById("winner").style.display="block";
}

// ---------------- Tournament -----------------
function startTournament(){
  let shuffled=[...villains].sort(()=>Math.random()-0.5);
  tournamentQueue=[];
  for(let i=0;i<shuffled.length;i+=2){
    if(i+1<shuffled.length) tournamentQueue.push([shuffled[i],shuffled[i+1]]);
    else tournamentQueue.push([shuffled[i]]);
  }
  tournamentBracket.push(JSON.parse(JSON.stringify(tournamentQueue.map(m=>m.map(v=>v.name)))));
  initializeBracket(true); // first round
  roundNumber=1;
  document.getElementById("round").textContent=`Round: ${roundNumber}`;
  advanceTournament();
}

function initializeBracket(firstRound=false){
  const container=document.getElementById("bracket-container");
  if(firstRound) container.innerHTML=""; // only clear for first round
  const roundDiv=document.createElement("div");
  roundDiv.className="round";
  roundDiv.id=`round-${tournamentBracket.length-1}`;
  roundDiv.innerHTML=`<h3>Round ${tournamentBracket.length}</h3>`;
  tournamentQueue.forEach(match=>{
    const matchDiv=document.createElement("div");
    matchDiv.className="match";
    match.forEach(sl=>{
      const span=document.createElement("span");
      span.id=`bracket-${tournamentBracket.length-1}-${sl.name}`;
      span.textContent=sl.name;
      matchDiv.appendChild(span);
      matchDiv.appendChild(document.createElement("br"));
    });
    roundDiv.appendChild(matchDiv);
  });
  container.appendChild(roundDiv);
}

function markBracket(winnerName, loserName, roundIdx){
  const winnerSpan=document.getElementById(`bracket-${roundIdx}-${winnerName}`);
  if(winnerSpan) winnerSpan.classList.add('winner');
  if(loserName){
    const loserSpan=document.getElementById(`bracket-${roundIdx}-${loserName}`);
    if(loserSpan) loserSpan.classList.add('eliminated');
  }
}

function advanceTournament(){
  if(currentMatch.length>0 && !inputLocked) return;
  if(tournamentQueue.length===0){
    if(tournamentWinners.length===1){
      displayTournamentWinner(tournamentWinners[0]);
      return;
    }
    let nextQueue=[];
    for(let i=0;i<tournamentWinners.length;i+=2){
      if(i+1<tournamentWinners.length) nextQueue.push([tournamentWinners[i],tournamentWinners[i+1]]);
      else nextQueue.push([tournamentWinners[i]]);
    }
    tournamentQueue=nextQueue;
    tournamentBracket.push(JSON.parse(JSON.stringify(tournamentQueue.map(m=>m.map(v=>v.name)))));
    initializeBracket(false); // append new round without clearing
    roundNumber++;
    document.getElementById("round").textContent=`Round: ${roundNumber}`;
    tournamentWinners=[];
  }
  if(tournamentQueue.length>0){
    currentMatch=tournamentQueue.shift();
    displayMatchup(currentMatch[0],currentMatch[1]);
    inputLocked=false;
    timeLeft=12;
  }
}

function displayMatchup(v1,v2){
  const container=document.getElementById("battle-container");
  container.innerHTML="";
  [v1,v2].forEach(v=>{
    if(v){
      const div=document.createElement("div"); div.className="villain-container";
      div.innerHTML=`<img src="${v.image}" alt="${v.name}"><p>${v.name}</p>`;
      div.onclick=()=>selectWinner(v.name);
      container.appendChild(div);
    }
  });
}

function displayTournamentWinner(winner){
  inputLocked=true; clearInterval(timer); timeLeft=0;
  document.getElementById("timer").textContent="Time Remaining: 00:00";
  document.getElementById("battle-container").innerHTML="";
  document.getElementById("winner-image").src=winner.image;
  document.getElementById("winner-name").textContent=winner.name;
  document.getElementById("winner-score").textContent="Champion";
  document.getElementById("winner").style.display="block";
}

// ---------------- Init -----------------
setMode('normal');
</script>
</body>
</html>
